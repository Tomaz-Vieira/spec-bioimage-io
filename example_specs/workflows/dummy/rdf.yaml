name: dummy workflow
description: A workflow to produce some nonsense
format_version: 0.2.3
type: workflow

inputs:
- name: shape
  type: list
  default: [2, 3]
- name: threshold
  type: float
  default: 0.5

outputs:
- name: nonsense
  type: tensor

steps:
- id: step0
  op: generate_random_tensor
  inputs:
    shape: ${{ inputs.shape }}
    dtype: float
    distribution: uniform
    low: 0
    high: 1
- id: step1
  op: binarize
  inputs:
    threshold: ${{ inputs.threshold }}
- op: log
  kwargs:
    threshold: ${{ kwargs.threshold }}
    original: ${{ step0.outputs.random_tensor }}
    binarized: ${{ step1.outputs.binarized }}

test_steps:
- id: wf
  op: run_workflow
  outputs: [out0]
  kwargs:
    rdf_source: ${{ self.rdf_source }}
    threshold: 0.5
- op: assert_shape
  inputs:
    tensor: ${{ wf.outputs.out0 }}
    shape: ${{ inputs.shape }}
