name: dummy workflow
description: A workflow to produce some nonsense
format_version: 0.2.3
type: workflow

inputs_spec:
- name: shape
  type: list
  description: two integer to describe a 2d shape

options_spec:
- name: threshold
  type: float
  default: 0.5

outputs_spec:
- name: nonsense
  type: tensor
  axes:
    - name: fantasy time
      type: time
    - name: x
      type: space

steps:
- id: step0
  op: generate_random_uniform_tensor
  inputs: ["${{ self.inputs.shape }}", ['fantasy time', 'x']]
#  options:
#    low: 0
#    high: 1
  outputs: [tensor]
- id: step1
  op: binarize
  inputs: ["${{ step0.outputs.tensor }}", "${{ self.options.threshold }}"]
- op: log
  options:
    log_level: 50
    threshold: "${{ self.options.threshold }}"
    original: "${{ step0.outputs.tensor }}"
#    binarized: "{{ step1.outputs.binarized }}"  # given implicitly as arg already


test_steps:
- id: wf
  op: run_workflow
  inputs: ["${{ self.rdf_source }}"]
  options:
    inputs: [&test-shape [2, 3]]
    options:
      threshold: 0.5
  outputs: [out0]
- op: assert_shape
  inputs: ["${{ wf.outputs.out0 }}", *test-shape]
