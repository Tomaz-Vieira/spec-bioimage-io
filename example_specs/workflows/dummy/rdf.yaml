name: dummy workflow
description: A workflow to produce some nonsense
format_version: 0.2.3
type: workflow

inputs:
- name: shape
  type: list
- name: axes
  type: str

options:
- name: threshold
  type: float
  default: 0.5

outputs:
- name: nonsense
  type: tensor

steps:
- id: step0
  op: generate_random_uniform_tensor
  inputs:
    shape: ${{ inputs.shape }}
    axes: ${{ inputs.axes }}
#  options:
#    low: 0
#    high: 1
- id: step1
  op: binarize
  inputs:
    threshold: ${{ inputs.threshold }}
- op: log
  options:
    log_level: 50
    threshold: ${{ kwargs.threshold }}
    original: ${{ step0.outputs.random_tensor }}
#    binarized: ${{ step1.outputs.binarized }}


test_steps:
- id: wf
  op: run_workflow
  inputs:
    rdf_source: ${{ self.rdf_source }}
  options:
    inputs:
      shape: [2, 3]
      axes: cx
    options:
      threshold: 0.5
  outputs: [out0]
- op: assert_shape
  inputs:
    tensor: ${{ wf.outputs.out0 }}
    shape: ${{ inputs.shape }}
